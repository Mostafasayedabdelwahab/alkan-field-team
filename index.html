<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <title>بيانات المتدرب</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f7f7f7;
            padding: 20px;
            direction: rtl;
            text-align: right;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            margin: auto;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #333;
            margin-bottom: 20px;
        }

        p {
            margin: 10px 0;
        }

        span {
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="card">
        <h2>بيانات المتدرب</h2>
        <p><span>الاسم:</span> <span id="name"></span></p>
        <p><span>الوظيفة:</span> <span id="title"></span></p>
        <p><span>الشركة:</span> <span id="contractor"></span></p>
        <p><span>رقم الموبايل:</span> <span id="mobile"></span></p>
        <hr />
        <h3>تواريخ انتهاء الدورات:</h3>
        <p><span>RA:</span> <span id="ra_expiry"></span></p>
        <p><span>FA:</span> <span id="fa_expiry"></span></p>
        <p><span>FF:</span> <span id="ff_expiry"></span></p>
        <p><span>EC:</span> <span id="ec_expiry"></span></p>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const id = params.get("id");

                   fetch(`https://script.google.com/macros/s/AKfycbyABEamKZ5rtvIapB0pDw1osexCeBfaclBo75sti5R5YIOyLY_-Gg4mefzUb8rtGeGMxg/exec?id=${id}`) // ← غيّر XXX لرابط الـ Web App بتاعك
            .then((res) => res.json())
            .then((data) => {
                if (data.length > 0) {
                    const user = data[0];

                    document.getElementById("name").textContent = user["National ID"];
                    document.getElementById("title").textContent = user["Title"];
                    document.getElementById("contractor").textContent = user["Contractor "]; // لاحظ المسافة
                    document.getElementById("mobile").textContent = user["Mobile No"];

                    document.getElementById("ra_expiry").textContent = (user["RA Expiry Date"] || "").split("T")[0];
                    document.getElementById("fa_expiry").textContent = (user["FA Expiry Date"] || "").split("T")[0];
                    document.getElementById("ff_expiry").textContent = (user["FF Expiry Date"] || "").split("T")[0];
                    document.getElementById("ec_expiry").textContent = (user["EC Expiry Date"] || "").split("T")[0];

                } else {
                    document.querySelector(".card").innerHTML = "لم يتم العثور على بيانات لهذه الهوية.";
                }
            })
            .catch((err) => {
                console.error(err);
                document.querySelector(".card").innerHTML = "حدث خطأ أثناء تحميل البيانات.";
            });
    </script>
</body>

</html>